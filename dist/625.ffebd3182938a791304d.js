"use strict";(self.webpackChunkportfolio_v8=self.webpackChunkportfolio_v8||[]).push([[625],{625:(e,t,n)=>{n.r(t),n.d(t,{GlobalCRTBackground:()=>m});var o=n(437),r=n(922),i=n(439),s=n(804),a=n(185),c=n(383),l=n(712),u=n(529);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,h(o.key),o)}}function h(e){var t=function(e){if("object"!=v(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}var d={uniforms:{tDiffuse:{value:null},u_time:{value:0}},vertexShader:"varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); }",fragmentShader:"\n        uniform sampler2D tDiffuse; uniform float u_time; varying vec2 vUv;\n        float random(vec2 st) { return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453); }\n        void main() {\n            vec2 barrel_uv = vUv - 0.5; float r = dot(barrel_uv, barrel_uv); vec2 uv = 0.5 + barrel_uv * (1.0 - 0.05 * r);\n            if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) { gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0); return; }\n            vec2 offset_r = vec2(0.0005, 0.0); vec2 offset_b = vec2(-0.0005, 0.0);\n            float red = texture2D(tDiffuse, uv + offset_r).r; float green = texture2D(tDiffuse, uv).g; float blue = texture2D(tDiffuse, uv + offset_b).b;\n            vec4 color = vec4(red, green, blue, 1.0);\n            float scanline = sin(vUv.y * 1000.0) * 0.02 + 0.98;\n            float noise = (random(vUv + u_time * 0.1) - 0.5) * 0.08;\n            color.rgb *= scanline;\n            color.rgb += noise;\n            float vignette = 1.0 - length(vUv - 0.5) * 0.6;\n            color.rgb *= vignette;\n            gl_FragColor = color;\n        }"},m=function(){return e=function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.getElementById(t),this.canvas){this.renderer=new o.WebGLRenderer({canvas:this.canvas}),this.contextLost=!1;try{this._removeContextGuards=(0,l.attachContextGuards)(this.renderer,{onLost:function(){n.contextLost=!0,console.warn("GlobalCRTBackground: context lost")},onRestored:function(){n.contextLost=!1,n.onResize(),console.info("GlobalCRTBackground: context restored")}})}catch(e){}this.scene=new r.Z58,this.camera=new r.qUd(-1,1,1,-1,0,1),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));var v=new r.GYF(new Uint8Array([13,17,23]),1,1,r.HIg);this.scene.background=v,this.composer=new i.s(this.renderer),this.composer.addPass(new s.A(this.scene,this.camera));var f=new c.C(new r.I9Y(window.innerWidth,window.innerHeight),.4,.1,.1);this.composer.addPass(f),this.crtPass=new a.p(d),this.composer.addPass(this.crtPass),this.clock=new r.zD7,this.onResize=this.onResize.bind(this),this.animate=this.animate.bind(this),u.A.on("global:resize",this.onResize),this.onResize(),this.animate()}else console.error("GlobalCRTBackground: Canvas non trovato!")},t=[{key:"onResize",value:function(){this.renderer.setSize(window.innerWidth,window.innerHeight),this.composer.setSize(window.innerWidth,window.innerHeight)}},{key:"animate",value:function(){if(!this.contextLost){this.animationFrameId=requestAnimationFrame(this.animate),this.crtPass.uniforms.u_time.value=this.clock.getElapsedTime();try{this.composer.render()}catch(e){console.warn("GlobalCRTBackground composer.render failed",e)}}}},{key:"destroy",value:function(){u.A.off("global:resize",this.onResize),this.animationFrameId&&cancelAnimationFrame(this.animationFrameId);try{this._removeContextGuards&&this._removeContextGuards()}catch(e){}try{this.contextLost||((0,l.safeDisposeComposer)(this.composer),(0,l.safeDisposeRenderer)(this.renderer))}catch(e){console.warn("GlobalCRTBackground dispose:",e)}}}],t&&f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()}}]);