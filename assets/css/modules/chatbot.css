/* Chat widget - Arcade / CRT style */
:root{--chat-bg:#05070a;--chat-accent:#00ffcc;--chat-accent-2:#66ffd9;--chat-text:#c8fff6;--crt-glow:0 0 18px rgba(0,255,200,0.08);--neon:#00ffcc}

.ai-chat-widget{
    position:fixed;
    right:20px;
    bottom:20px;
    z-index: 999999 !important; /* VALORE ALTISSIMO PER GARANTIRE CHE SIA SEMPRE SOPRA TUTTO */
    font-family:'VT323', 'Share Tech Mono', monospace;
}

.ai-chat-toggle{width:56px;height:56px;border-radius:8px;background:linear-gradient(180deg,#08121a,#021018);display:flex;align-items:center;justify-content:center;color:var(--neon);border:2px solid rgba(0,255,200,0.12);cursor:pointer;box-shadow:0 10px 30px rgba(0,0,0,0.6), var(--crt-glow);font-weight:700}
.ai-chat-toggle:hover{transform:translateY(-2px)}
.ai-chat-panel{width:360px;height:440px;background:radial-gradient(circle at 20% 10%, rgba(0,255,200,0.04), transparent 15%), linear-gradient(180deg,#05121a,#02131a);border-radius:10px;box-shadow:0 20px 80px rgba(0,0,0,0.7), var(--crt-glow);overflow:hidden;margin-bottom:12px;display:flex;flex-direction:column;border:2px solid rgba(0,255,200,0.06);backdrop-filter:blur(2px)}
.ai-chat-panel::after{content:'';position:absolute;pointer-events:none;inset:auto 20px 120px auto;width:320px;height:300px;mix-blend-mode:overlay;opacity:0.06;background:repeating-linear-gradient(transparent, transparent 2px, rgba(0,0,0,0.03) 3px)}
.ai-chat-header{display:flex;align-items:center;gap:10px;padding:10px 12px;background:linear-gradient(90deg,rgba(0,0,0,0.25),rgba(255,255,255,0.01));border-bottom:1px solid rgba(0,255,200,0.05)}
.ai-avatar{width:42px;height:36px;border-radius:6px;background:linear-gradient(135deg,var(--chat-accent),var(--chat-accent-2));display:flex;align-items:center;justify-content:center;color:#021;font-weight:700;font-family:'Share Tech Mono', monospace;font-size:18px;box-shadow:inset 0 -4px 8px rgba(0,0,0,0.25)}
.ai-chat-title{color:var(--chat-text);font-size:16px;font-weight:700;font-family:'Share Tech Mono', monospace}
.ai-chat-sub{color:rgba(200,255,246,0.6);font-size:11px}
.ai-chat-actions{margin-left:auto;display:flex;gap:6px;align-items:center}
.ai-chat-action-btn{background:transparent;border:1px solid rgba(0,255,200,0.06);color:var(--chat-accent);padding:6px 8px;border-radius:6px;font-size:12px;cursor:pointer}
.ai-chat-actions .ai-chat-action-btn:hover{background:rgba(0,255,200,0.02)}
.ai-clear-btn{border-color:rgba(255,80,80,0.12);color:#ff8080}
.ai-settings-panel{position:relative;padding:8px 12px;background:linear-gradient(180deg,rgba(0,0,0,0.2),rgba(0,0,0,0.05));border-top:1px solid rgba(0,255,200,0.03);}
.ai-settings-inner h4{margin:0 0 6px 0;color:var(--chat-accent)}
.ai-settings-inner label{display:block;color:rgba(200,255,246,0.8);font-size:13px;margin:6px 0}
.ai-settings-inner select{background:transparent;border:1px solid rgba(0,255,200,0.06);color:var(--chat-text);padding:6px;border-radius:6px}
.ai-settings-inner input[type="checkbox"]{margin-right:6px}
.ai-chat-messages{flex:1;padding:12px;overflow:auto;display:flex;flex-direction:column;gap:8px;background:linear-gradient(180deg, rgba(0,0,0,0.02), transparent)}
.msg{max-width:78%;padding:8px 12px;border-radius:6px;color:var(--chat-text);line-height:1.25;border:1px solid rgba(255,255,255,0.03);font-family:'Share Tech Mono', monospace;font-size:13px}
.msg.user{align-self:flex-end;background:linear-gradient(180deg,rgba(10,10,10,0.35),rgba(255,255,255,0.02));border:1px solid rgba(255,255,255,0.04);box-shadow:0 4px 14px rgba(0,0,0,0.5)}
.msg.ai{align-self:flex-start;background:linear-gradient(180deg,rgba(0,30,30,0.25),rgba(0,10,20,0.15));border:1px solid rgba(0,255,200,0.06);box-shadow:var(--crt-glow)}
.ai-typing{width:36px;height:18px;border-radius:12px;background:rgba(255,255,255,0.02);display:flex;gap:4px;padding:4px}
.ai-typing span{display:block;width:6px;height:6px;background:rgba(200,255,246,0.9);border-radius:50%;animation:blink 1s infinite}
.ai-typing span:nth-child(2){animation-delay:0.15s}
.ai-typing span:nth-child(3){animation-delay:0.3s}
@keyframes blink{0%{opacity:.2;transform:translateY(0)}50%{opacity:1;transform:translateY(-3px)}100%{opacity:.2;transform:translateY(0)}}
.ai-chat-input{display:flex;gap:8px;padding:10px;border-top:1px solid rgba(0,255,200,0.03);background:linear-gradient(180deg,rgba(0,0,0,0.06),transparent)}
.ai-chat-input input{flex:1;padding:10px;border-radius:6px;border:1px solid rgba(0,255,200,0.06);background:rgba(0,0,0,0.12);color:var(--chat-text);outline:none;font-family:'Share Tech Mono', monospace}
.ai-chat-input button{padding:8px 12px;border-radius:6px;border:0;background:var(--neon);color:#001;cursor:pointer;box-shadow:0 6px 18px rgba(0,255,200,0.06)}
.ai-quick-replies{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
.ai-quick-reply{background:transparent;border:1px solid rgba(0,255,200,0.08);color:var(--chat-accent);padding:6px 8px;border-radius:6px;font-size:12px;cursor:pointer}
.ai-quick-reply:hover{background:rgba(0,255,200,0.02)}
@media (max-width:520px){.ai-chat-panel{width:92vw;height:62vh;right:6px;bottom:6px}.ai-chat-widget{right:6px;bottom:6px}}

/* === MIGLIORAMENTI INTERAZIONE UTENTE === */
.ai-chat-panel {
    transform: translateY(20px) scale(0.95);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
.ai-chat-panel.open {
    transform: translateY(0) scale(1);
    opacity: 1;
}
.msg {
    animation: message-appear 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateY(10px);
    opacity: 0;
}
.msg.animate-in {
    animation: message-slide-in 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}
@keyframes message-slide-in {
    from { transform: translateY(10px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

body.is-loading .ai-chat-widget {
	display: none !important;
}